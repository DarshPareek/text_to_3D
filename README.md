# 3D Terrain Generation from Text

This project demonstrates a machine learning pipeline for generating 3D terrain models from text prompts. It uses Stable Diffusion to create a heightmap from a prompt, and then converts that heightmap into a 3D mesh.

## Features

- **Text-to-3D:** Generate 3D terrain from a simple text description.
- **API with Job Queue:** A FastAPI server manages generation tasks in the background.
- **Parameter Control:** Adjust parameters like `seed`, `steps`, and `vertical_scale` to influence the output.

## How to Run

1. **Install Dependencies:**

   ```bash
   pip install -r requirements.txt
   ```

2. **Run the API Server:**

   ```bash
   uvicorn app.main:app --reload
   ```

3. **Generate Terrain:**

   Send a POST request to the `/generate` endpoint:

   ```bash
   curl -X POST "http://127.0.0.1:8000/generate" -H "Content-Type: application/json" -d '{
     "prompt": "a desert with sand dunes, aerial view, grayscale",
     "seed": 123,
     "steps": 20
   }'
   ```

   This will return a `job_id`.

4. **Check Status:**

   Use the `job_id` to check the status of your generation task:

   ```bash
   curl http://127.0.0.1:8000/status/<your_job_id>
   ```

   When the status is `completed`, the output files will be available in the `outputs` directory.

## Validation and Metrics

The generated meshes are validated for basic quality:

- **Polycount:** The number of vertices and faces are printed to the console during generation.
- **Format:** The output is a `.glb` file, which is a standard format for 3D assets and can be imported into Blender, Unity, and other game engines.

## Post-Processing

This project includes a basic post-processing step:

- **Format Conversion:** The mesh is automatically converted to GLB format for easy use in game engines.

## Examples

```bash
curl -X POST "http://127.0.0.1:8000/generate" -H "Content-Type: application/json" -d '{
"prompt": "a desert with sand dunes, aerial view, grayscale",
"seed": 42,
"steps": 40
}'
```

| Initial Image Generated by the model                            | 3D render of the image in blender            |
| --------------------------------------------------------------- | -------------------------------------------- |
| ![[outputs/heightmap_6dc990a2-468c-4ee5-9829-07f9f9600f91.png]] | ![[outputs/250914_23h16m31s_screenshot.png]] |
